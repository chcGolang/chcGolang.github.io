<!DOCTYPE html><html lang="zh-Hans"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><title>JVM性能监控 | Chc</title><meta name="description" content="JVM性能监控"><meta name="keywords" content="调优"><meta name="author" content="Chc"><meta name="copyright" content="Chc"><meta name="format-detection" content="telephone=no"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="canonical" href="https://blog.caihc.site/posts/31cced81/"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="JVM性能监控"><meta name="twitter:description" content="JVM性能监控"><meta name="twitter:image" content="http://qiniu.caihc.site/blog/jvm.png"><meta property="og:type" content="article"><meta property="og:title" content="JVM性能监控"><meta property="og:url" content="https://blog.caihc.site/posts/31cced81/"><meta property="og:site_name" content="Chc"><meta property="og:description" content="JVM性能监控"><meta property="og:image" content="http://qiniu.caihc.site/blog/jvm.png"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="prev" title="java的23种设计模式" href="https://blog.caihc.site/posts/5e103278/"><link rel="next" title="docker命令选项" href="https://blog.caihc.site/posts/3fe19f6b/"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容:${query}"}},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  }
} </script></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div class="auto_open" id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#一-JDK命令行工具监控"><span class="toc-number">1.</span> <span class="toc-text">一. JDK命令行工具监控</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#0-命令文档地址"><span class="toc-number">1.1.</span> <span class="toc-text">0. 命令文档地址</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-XX参数分类"><span class="toc-number">1.2.</span> <span class="toc-text">1. XX参数分类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-查看JVM运行时参数"><span class="toc-number">1.3.</span> <span class="toc-text">2. 查看JVM运行时参数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-PrintFlagsFinal"><span class="toc-number">1.3.1.</span> <span class="toc-text">2.1 PrintFlagsFinal</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-jps"><span class="toc-number">1.3.2.</span> <span class="toc-text">2.2 jps</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-jinfo"><span class="toc-number">1.3.3.</span> <span class="toc-text">2.3 jinfo</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-jstat查看JVM统计信息"><span class="toc-number">1.3.4.</span> <span class="toc-text">2.4 jstat查看JVM统计信息</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-jmap-MAT实战内存溢出"><span class="toc-number">1.3.5.</span> <span class="toc-text">2.5 jmap+MAT实战内存溢出</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-jstack解决死循环和死锁"><span class="toc-number">1.3.6.</span> <span class="toc-text">2.5 jstack解决死循环和死锁</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#三-java进程监控"><span class="toc-number">2.</span> <span class="toc-text">三. java进程监控</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-基于JVisualVM的可视化监控"><span class="toc-number">2.1.</span> <span class="toc-text">1. 基于JVisualVM的可视化监控</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-本地监控"><span class="toc-number">2.1.1.</span> <span class="toc-text">1. 本地监控</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-安装插件"><span class="toc-number">2.1.2.</span> <span class="toc-text">2. 安装插件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-远程监控"><span class="toc-number">2.1.3.</span> <span class="toc-text">3. 远程监控</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#四-Nginx"><span class="toc-number">3.</span> <span class="toc-text">四. Nginx</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-基本命令"><span class="toc-number">3.1.</span> <span class="toc-text">1. 基本命令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-nginx优化"><span class="toc-number">3.2.</span> <span class="toc-text">2. nginx优化</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-增加工作线程数和并发数"><span class="toc-number">3.2.1.</span> <span class="toc-text">1. 增加工作线程数和并发数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-配置Server的长连接"><span class="toc-number">3.2.2.</span> <span class="toc-text">2. 配置Server的长连接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-配置数据压缩"><span class="toc-number">3.2.3.</span> <span class="toc-text">3. 配置数据压缩</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-操作系统优化"><span class="toc-number">3.2.4.</span> <span class="toc-text">4. 操作系统优化</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-nginx配置文件"><span class="toc-number">3.3.</span> <span class="toc-text">3. nginx配置文件</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#五-JVM的GC调优"><span class="toc-number">4.</span> <span class="toc-text">五. JVM的GC调优</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#5-1-GC日志"><span class="toc-number">4.1.</span> <span class="toc-text">5.1 GC日志</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#6-工具"><span class="toc-number">5.</span> <span class="toc-text">6 工具</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#7-JVM知识的优秀文章"><span class="toc-number">6.</span> <span class="toc-text">7 JVM知识的优秀文章</span></a></li></ol></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(http://qiniu.caihc.site/blog/jvm.png)"><div id="page-header"><span class="pull-left"> <a class="blog_title" id="site-name" href="/">Chc</a></span><div class="open toggle-menu pull-right"><div class="menu-icon-first"></div><div class="menu-icon-second"></div><div class="menu-icon-third"></div></div><span class="pull-right menus"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a><script>document.body.addEventListener('touchstart', function(){ });</script></span><span class="pull-right"><a class="site-page social-icon search"><i class="fa fa-search fa-fw"></i><span> 搜索</span></a></span></div><div id="post-info"><div id="post-title"><div class="posttitle">JVM性能监控</div></div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 发表于 2019-06-13<span class="post-meta__separator">|</span><i class="fa fa-history" aria-hidden="true"></i> 更新于 2019-06-13</time><span class="post-meta__separator mobile_hidden">|</span><span class="mobile_hidden"><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/java/">java</a></span></div></div></div><div class="layout layout_post" id="content-inner">   <article id="post"><div class="article-container" id="post-content"><h1 id="一-JDK命令行工具监控"><a href="#一-JDK命令行工具监控" class="headerlink" title="一. JDK命令行工具监控"></a>一. JDK命令行工具监控</h1><h2 id="0-命令文档地址"><a href="#0-命令文档地址" class="headerlink" title="0. 命令文档地址"></a>0. 命令文档地址</h2><p><a href="https://docs.oracle.com/javase/8/docs/technotes/tools/unix/index.html" target="_blank" rel="noopener">https://docs.oracle.com/javase/8/docs/technotes/tools/unix/index.html</a></p>
<h2 id="1-XX参数分类"><a href="#1-XX参数分类" class="headerlink" title="1. XX参数分类"></a>1. XX参数分类</h2><ul>
<li>Boolean类型</li>
</ul>
<img src="https://youdaoyun-chc.oss-cn-shenzhen.aliyuncs.com/java%2F1.png" width="500" hegiht="313" align="center">

<ul>
<li>非Boolean类型</li>
</ul>
<img src="https://youdaoyun-chc.oss-cn-shenzhen.aliyuncs.com/java%2F2.png" width="500" hegiht="313" align="center">

<ul>
<li>-Xmx -Xms(最大内存,最小内存)<ol>
<li>-Xms等价于-XX.InitialHeapSize</li>
<li>-Xmx等价于-XX:MaxHeapSize</li>
</ol>
</li>
</ul>
<h2 id="2-查看JVM运行时参数"><a href="#2-查看JVM运行时参数" class="headerlink" title="2. 查看JVM运行时参数"></a>2. 查看JVM运行时参数</h2><ul>
<li>-XX:+PrintFlagslnitial 查看初始值情况</li>
<li>-XX:+PrintFlagsFinal   查看最终值</li>
<li>-XX:+UnlockExperimentalVMOptions 解锁实验参数</li>
<li>-XX:+UnlockDiagnosticVMOptions 解锁诊断参数</li>
<li>-xx:+PrintCommandLineFlags 打印命令行参数</li>
</ul>
<h3 id="2-1-PrintFlagsFinal"><a href="#2-1-PrintFlagsFinal" class="headerlink" title="2.1 PrintFlagsFinal"></a>2.1 PrintFlagsFinal</h3><ul>
<li>=表示默认值, :=被用户或者JVM修改后的值<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -XX:+PrintFlagsFinal -version</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="2-2-jps"><a href="#2-2-jps" class="headerlink" title="2.2 jps"></a>2.2 jps</h3><p><a href="https://docs.oracle.com/javase/8/docs/technotes/tools/unix/jps.html" target="_blank" rel="noopener">https://docs.oracle.com/javase/8/docs/technotes/tools/unix/jps.html</a></p>
<ul>
<li><p>jps用法</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># hostid 命令对应的服务器ip，默认不加参数，代码查看本机</span></span><br><span class="line">jps [参数] [&lt;hostid&gt;]</span><br></pre></td></tr></table></figure>
</li>
<li><p>jps参数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-q：只输出进程 ID</span><br><span class="line">-m：输出传入 main 方法的参数</span><br><span class="line">-l：输出完全的包名，应用主类名，jar的完全路径名</span><br><span class="line">-v：输出jvm参数</span><br><span class="line">-V：输出通过flag文件传递到JVM中的参数</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="2-3-jinfo"><a href="#2-3-jinfo" class="headerlink" title="2.3 jinfo"></a>2.3 jinfo</h3><ol>
<li><p>功能</p>
<ul>
<li>查看JVM参数(常用)</li>
<li>查看系统参数，即可通过System.getProperty(key)获得的参数(常用)</li>
<li>修改JVM参数(少用)</li>
</ul>
</li>
<li><p>使用命令</p>
<ul>
<li><p>分析pid</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">jinfo [option] &#123;pid&#125;</span><br><span class="line"><span class="comment"># pid: 可通过jps或者ps获得</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>分析core dump文件</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">jinfo [option] &#123;executable&#125; &#123;core&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># executable: The Java executable from which the core dump was produced.</span></span><br><span class="line"><span class="comment"># core: The core file for which the configuration information is to be printed.</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>分析远程进程</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">jinfo [option] [ server-id ] &#123;remote-hostname-or-IP&#125;</span><br><span class="line"><span class="comment"># server-id: An optional unique ID to use when multiple debug servers are running on the same remote host.</span></span><br><span class="line"><span class="comment"># remote-hostname-or-IP: 远程服务的IP或者hostname</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>option可选值</p>
<ul>
<li><p>no-option:即，没有任何option。会打印所有的JVM参数和系统参数。等同于-flags + -sysprops</p>
</li>
<li><p>-flag {name} : 打印指定的JVM参数值。</p>
  <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">jinfo -flag SurvivorRatio 55394</span><br><span class="line"><span class="comment"># 结果为: -XX:SurvivorRatio=8</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>-flag [+|-]name : enables or disables指定的VM参数，也就是使指定的VM参数生效或者失效</p>
  <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">jinfo -flag -PrintGCDateStamps 12905</span><br><span class="line"><span class="comment"># 结果为：使PrintGCDateStamps失效</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>-flag name=value : 为指定的VM参数(name)设置指定的值(value)</p>
  <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">jinfo -flag MaxHeapFreeRatio=80 12905</span><br><span class="line"><span class="comment"># 再通过jinfo -flag MaxHeapFreeRatio 12905查看其值</span></span><br><span class="line"><span class="comment"># 结果为: -XX:MaxHeapFreeRatio=80</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>-flags : 打印所有的VM参数</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Non-default VM flags: -XX:CICompilerCount=2 -XX:CMSFullGCsBeforeCompaction=0 -XX:CMSInitiatingOccupancyFraction=80 -XX:+DisableExplicitGC -XX:ErrorFile=null -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=null -XX:InitialCodeCacheSize=134217728 -XX:InitialHeapSize=1073741824 -XX:MaxHeapSize=1073741824 -XX:MaxMetaspaceSize=268435456 -XX:MaxNewSize=268435456 -XX:MinHeapDeltaBytes=196608 -XX:NewSize=268435456 -XX:OldPLABSize=16 -XX:OldSize=805306368 -XX:+PrintGC -XX:+PrintGCDateStamps -XX:+PrintGCDetails -XX:+PrintGCTimeStamps -XX:+PrintHeapAtGC -XX:+PrintTenuringDistribution -XX:ReservedCodeCacheSize=134217728 -XX:SurvivorRatio=8 -XX:+UseCMSCompactAtFullCollection -XX:+UseCompressedClassPointers -XX:+UseCompressedOops -XX:+UseConcMarkSweepGC -XX:+UseFastUnorderedTimeStamps -XX:+UseParNewGC</span><br><span class="line">Command line:  -Dfile.encoding=UTF-8 -Dsun.jnu.encoding=UTF-8 -Djava.io.tmpdir=/opt/micheal/tmp -Djava.net.preferIPv6Addresses=false -DLog4jContextSelector=org.apache.logging.log4j.core.async.AsyncLoggerContextSelector -Xmx1g -Xms1g -Xmn256m -XX:SurvivorRatio=8 -XX:MaxMetaspaceSize=256m -XX:+HeapDumpOnOutOfMemoryError -XX:ReservedCodeCacheSize=128m -XX:InitialCodeCacheSize=128m -XX:+DisableExplicitGC -XX:+PrintGCDetails -XX:+PrintHeapAtGC -XX:+PrintTenuringDistribution -XX:+UseConcMarkSweepGC -XX:+PrintGCTimeStamps -XX:+PrintGCDateStamps -XX:CMSFullGCsBeforeCompaction=0 -XX:+UseCMSCompactAtFullCollection -XX:CMSInitiatingOccupancyFraction=80 -Xloggc:/opt/logs/mobile/xm.test.read/xm.test.read.gc.log -XX:ErrorFile=/opt/logs/mobile/xm.test.read/xm.test.read.vmerr.log -XX:HeapDumpPath=/opt/logs/mobile/xm.test.read/xm.test.read.heaperr.log -Djetty.appkey=xm.test.read -Djetty.context=/ -Djetty.logs=/opt/logs/mobile/xm.test.read -Djetty.webroot=/opt/micheal/mobile/xm.test.read/webroot</span><br></pre></td></tr></table></figure>
</li>
<li><p>-sysprops : 打印系统参数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jinfo -sysprops 12905</span><br></pre></td></tr></table></figure>
</li>
<li><p>-h : 帮助信息</p>
<ul>
<li>查看最大内存<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1292为进程Id</span></span><br><span class="line">jinfo -flag MaxHeapSize 1292</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
</li>
</ol>
<ul>
<li>查看垃圾回收器  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 1292为进程Id</span><br><span class="line">jinfo -flag UseG1GC 1292</span><br><span class="line">jinfo -flag UseConcMarkSweepGC 1292</span><br><span class="line">jinfo -flag UseParallelGC 1292</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="2-4-jstat查看JVM统计信息"><a href="#2-4-jstat查看JVM统计信息" class="headerlink" title="2.4 jstat查看JVM统计信息"></a>2.4 jstat查看JVM统计信息</h3><ul>
<li><p>用法</p>
  <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">jstat -&lt;option&gt; [-t] [-h&lt;lines&gt;] &lt;vmid&gt; [&lt;interval&gt; [&lt;count&gt;]]</span><br><span class="line"><span class="comment"># option： 参数选项</span></span><br><span class="line"><span class="comment"># -t： 可以在打印的列加上Timestamp列，用于显示系统运行的时间</span></span><br><span class="line"><span class="comment"># -h： 可以在周期性数据数据的时候，可以在指定输出多少行以后输出一次表头</span></span><br><span class="line"><span class="comment"># vmid： Virtual Machine ID（ 进程的 pid）</span></span><br><span class="line"><span class="comment"># interval： 执行每次的间隔时间，单位为毫秒</span></span><br><span class="line"><span class="comment"># count： 用于指定输出多少次记录，缺省则会一直打印</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>option参数</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>-class</td>
<td>显示ClassLoad的相关信息；</td>
</tr>
<tr>
<td>-compiler</td>
<td>显示JIT编译的相关信息；</td>
</tr>
<tr>
<td>-gc</td>
<td>显示和gc相关的堆信息；</td>
</tr>
<tr>
<td>-gccapacity</td>
<td>显示各个代的容量以及使用情况；</td>
</tr>
<tr>
<td>-gcmetacapacity</td>
<td>显示metaspace的大小</td>
</tr>
<tr>
<td>-gcnew</td>
<td>显示新生代信息；</td>
</tr>
<tr>
<td>-gcnewcapacity</td>
<td>显示新生代大小和使用情况；</td>
</tr>
<tr>
<td>-gcold</td>
<td>显示老年代和永久代的信息；</td>
</tr>
<tr>
<td>-gcoldcapacity</td>
<td>显示老年代的大小；</td>
</tr>
<tr>
<td>-gcutil</td>
<td>显示垃圾收集信息；</td>
</tr>
<tr>
<td>-gccause</td>
<td>显示垃圾回收的相关信息（通-gcutil）,同时显示最后一次或当前正在发生的垃圾回收的诱因；</td>
</tr>
<tr>
<td>-printcompilation</td>
<td>输出JIT编译的方法信息；</td>
</tr>
</tbody></table>
</li>
</ul>
<ul>
<li><p>类加载 -class</p>
  <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jstat -class &lt;pid&gt;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>结果字段</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>Loaded</td>
<td>已经装载的类的数量</td>
</tr>
<tr>
<td>Bytes</td>
<td>装载类所占用的字节数</td>
</tr>
<tr>
<td>Unloaded</td>
<td>已经卸载类的数量</td>
</tr>
<tr>
<td>Bytes</td>
<td>卸载类的字节数</td>
</tr>
<tr>
<td>Time</td>
<td>装载和卸载类所花费的时间</td>
</tr>
<tr>
<td>*  -compiler 显示VM实时编译(JIT)的数量信息</td>
<td></td>
</tr>
<tr>
<td><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jstat -compiler &lt;pid&gt;</span><br></pre></td></tr></table></figure></td>
<td></td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>结果字段</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>Compiled</td>
<td>编译任务执行数量</td>
</tr>
<tr>
<td>Failed</td>
<td>编译任务执行失败数量</td>
</tr>
<tr>
<td>Invalid</td>
<td>编译任务执行失效数量</td>
</tr>
<tr>
<td>Time</td>
<td>编译任务消耗时间</td>
</tr>
<tr>
<td>FailedType</td>
<td>最后一个编译失败任务的类型</td>
</tr>
<tr>
<td>FailedMethod</td>
<td>最后一个编译失败任务所在的类及方法</td>
</tr>
<tr>
<td>* -gc 垃圾收集</td>
<td></td>
</tr>
<tr>
<td><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># -gc,-gcutil,-gccause,-gcnew,-gcold</span><br><span class="line">jstat -gc &lt;pid&gt;</span><br></pre></td></tr></table></figure></td>
<td></td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>结果字段</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>S0C</td>
<td>年轻代中第一个survivor（幸存区）的容量 （字节）</td>
</tr>
<tr>
<td>S1C</td>
<td>年轻代中第二个survivor（幸存区）的容量 (字节)</td>
</tr>
<tr>
<td>S0U</td>
<td>年轻代中第一个survivor（幸存区）目前已使用空间 (字节)</td>
</tr>
<tr>
<td>S1U</td>
<td>年轻代中第二个survivor（幸存区）目前已使用空间 (字节)</td>
</tr>
<tr>
<td>EC</td>
<td>年轻代中Eden（伊甸园）的容量 (字节)</td>
</tr>
<tr>
<td>EU</td>
<td>年轻代中Eden（伊甸园）目前已使用空间 (字节)</td>
</tr>
<tr>
<td>OC</td>
<td>Old代的容量 (字节)</td>
</tr>
<tr>
<td>OU</td>
<td>Old代目前已使用空间 (字节)</td>
</tr>
<tr>
<td>MC</td>
<td>metaspace(元空间)的容量 (字节)</td>
</tr>
<tr>
<td>MU</td>
<td>metaspace(元空间)目前已使用空间 (字节)</td>
</tr>
<tr>
<td>YGC</td>
<td>从应用程序启动到采样时年轻代中gc次数</td>
</tr>
<tr>
<td>YGCT</td>
<td>从应用程序启动到采样时年轻代中gc所用时间(s)</td>
</tr>
<tr>
<td>FGC</td>
<td>从应用程序启动到采样时old代(全gc)gc次数</td>
</tr>
<tr>
<td>FGCT</td>
<td>从应用程序启动到采样时old代(全gc)gc所用时间(s)</td>
</tr>
<tr>
<td>GCT</td>
<td>从应用程序启动到采样时gc用的总时间(s)</td>
</tr>
<tr>
<td>CCSC</td>
<td>压缩类空间总量(字节)</td>
</tr>
<tr>
<td>CCSU</td>
<td>压缩类空间使用量(字节)</td>
</tr>
</tbody></table>
<ul>
<li><p>-gccapacity VM内存中三代（young,old,perm）对象的使用和占用大小</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jstat -gccapacity &lt;pid&gt;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>结果字段</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>NGCMN</td>
<td>年轻代(young)中初始化(最小)的大小(字节)</td>
</tr>
<tr>
<td>NGCMX</td>
<td>年轻代(young)的最大容量 (字节)</td>
</tr>
<tr>
<td>NGC</td>
<td>年轻代(young)中当前的容量 (字节)</td>
</tr>
<tr>
<td>S0C</td>
<td>年轻代中第一个survivor（幸存区）的容量 (字节)</td>
</tr>
<tr>
<td>S1C</td>
<td>年轻代中第二个survivor（幸存区）的容量 (字节)</td>
</tr>
<tr>
<td>EC</td>
<td>年轻代中Eden（伊甸园）的容量 (字节)</td>
</tr>
<tr>
<td>OGCMN</td>
<td>old代中初始化(最小)的大小 (字节)</td>
</tr>
<tr>
<td>OGCMX</td>
<td>old代的最大容量(字节)</td>
</tr>
<tr>
<td>OGC</td>
<td>old代当前新生成的容量 (字节)</td>
</tr>
<tr>
<td>OC</td>
<td>Old代的容量 (字节)</td>
</tr>
<tr>
<td>MCMN</td>
<td>metaspace(元空间)中初始化(最小)的大小 (字节)</td>
</tr>
<tr>
<td>MCMX</td>
<td>metaspace(元空间)的最大容量 (字节)</td>
</tr>
<tr>
<td>MC</td>
<td>metaspace(元空间)当前新生成的容量 (字节)</td>
</tr>
<tr>
<td>CCSMN</td>
<td>最小压缩类空间大小</td>
</tr>
<tr>
<td>CCSMX</td>
<td>最大压缩类空间大小</td>
</tr>
<tr>
<td>CCSC</td>
<td>当前压缩类空间大小</td>
</tr>
<tr>
<td>YGC</td>
<td>从应用程序启动到采样时年轻代中gc次数</td>
</tr>
<tr>
<td>FGC</td>
<td>从应用程序启动到采样时old代(全gc)gc次数</td>
</tr>
</tbody></table>
</li>
<li><p>-gcmetacapacity metaspace中对象的信息及其占用量。</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jstat -gcmetacapacity &lt;pid&gt;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>结果字段</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>MCMN</td>
<td>最小元数据容量</td>
</tr>
<tr>
<td>MCMX</td>
<td>最大元数据容量</td>
</tr>
<tr>
<td>MC</td>
<td>当前元数据空间大小</td>
</tr>
<tr>
<td>CCSMN</td>
<td>最小压缩类空间大小</td>
</tr>
<tr>
<td>CCSMX</td>
<td>最大压缩类空间大小</td>
</tr>
<tr>
<td>CCSC</td>
<td>当前压缩类空间大小</td>
</tr>
<tr>
<td>YGC</td>
<td>从应用程序启动到采样时年轻代中gc次数</td>
</tr>
<tr>
<td>FGC</td>
<td>从应用程序启动到采样时old代(全gc)gc次数</td>
</tr>
<tr>
<td>FGCT</td>
<td>从应用程序启动到采样时old代(全gc)gc所用时间(s)</td>
</tr>
<tr>
<td>GCT</td>
<td>从应用程序启动到采样时gc用的总时间(s)</td>
</tr>
</tbody></table>
</li>
<li><p>-gcnew 年轻代对象的信息。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jstat -gcnew &lt;pid&gt;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>结果字段</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>S0C</td>
<td>年轻代中第一个survivor（幸存区）的容量 (字节)</td>
</tr>
<tr>
<td>S1C</td>
<td>年轻代中第二个survivor（幸存区）的容量 (字节)</td>
</tr>
<tr>
<td>S0U</td>
<td>年轻代中第一个survivor（幸存区）目前已使用空间 (字节)</td>
</tr>
<tr>
<td>S1U</td>
<td>年轻代中第二个survivor（幸存区）目前已使用空间 (字节)</td>
</tr>
<tr>
<td>TT</td>
<td>持有次数限制</td>
</tr>
<tr>
<td>MTT</td>
<td>最大持有次数限制</td>
</tr>
<tr>
<td>DSS</td>
<td>期望的幸存区大小</td>
</tr>
<tr>
<td>EC</td>
<td>年轻代中Eden（伊甸园）的容量 (字节)</td>
</tr>
<tr>
<td>EU</td>
<td>年轻代中Eden（伊甸园）目前已使用空间 (字节)</td>
</tr>
<tr>
<td>YGC</td>
<td>从应用程序启动到采样时年轻代中gc次数</td>
</tr>
<tr>
<td>YGCT</td>
<td>从应用程序启动到采样时年轻代中gc所用时间(s)</td>
</tr>
</tbody></table>
</li>
<li><p>-gcnewcapacity 年轻代对象的信息及其占用量</p>
<table>
<thead>
<tr>
<th>结果字段</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>NGCMN</td>
<td>年轻代(young)中初始化(最小)的大小(字节)</td>
</tr>
<tr>
<td>NGCMX</td>
<td>年轻代(young)的最大容量 (字节)</td>
</tr>
<tr>
<td>NGC</td>
<td>年轻代(young)中当前的容量 (字节)</td>
</tr>
<tr>
<td>S0CMX</td>
<td>年轻代中第一个survivor（幸存区）的最大容量 (字节)</td>
</tr>
<tr>
<td>S0C</td>
<td>年轻代中第一个survivor（幸存区）的容量 (字节)</td>
</tr>
<tr>
<td>S1CMX</td>
<td>年轻代中第二个survivor（幸存区）的最大容量 (字节)</td>
</tr>
<tr>
<td>S1C</td>
<td>年轻代中第二个survivor（幸存区）的容量 (字节)</td>
</tr>
<tr>
<td>ECMX</td>
<td>年轻代中Eden（伊甸园）的最大容量 (字节)</td>
</tr>
<tr>
<td>EC</td>
<td>年轻代中Eden（伊甸园）的容量 (字节)</td>
</tr>
<tr>
<td>YGC</td>
<td>从应用程序启动到采样时年轻代中gc次数</td>
</tr>
<tr>
<td>FGC</td>
<td>从应用程序启动到采样时old代(全gc)gc次数</td>
</tr>
</tbody></table>
</li>
<li><p>-gcold old代对象的信息</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jstat -gcold &lt;pid&gt;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>结果字段</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>MC</td>
<td>metaspace(元空间)的容量 (字节)</td>
</tr>
<tr>
<td>MU</td>
<td>metaspace(元空间)目前已使用空间 (字节)</td>
</tr>
<tr>
<td>CCSC</td>
<td>压缩类空间大小</td>
</tr>
<tr>
<td>CCSU</td>
<td>压缩类空间使用大小</td>
</tr>
<tr>
<td>OC</td>
<td>Old代的容量 (字节)</td>
</tr>
<tr>
<td>OU</td>
<td>Old代目前已使用空间 (字节)</td>
</tr>
<tr>
<td>YGC</td>
<td>从应用程序启动到采样时年轻代中gc次数</td>
</tr>
<tr>
<td>FGC</td>
<td>从应用程序启动到采样时old代(全gc)gc次数</td>
</tr>
<tr>
<td>FGCT</td>
<td>从应用程序启动到采样时old代(全gc)gc所用时间(s)</td>
</tr>
<tr>
<td>GCT</td>
<td>从应用程序启动到采样时gc用的总时间(s)</td>
</tr>
</tbody></table>
</li>
<li><p>-gcoldcapacity old代对象的信息及其占用量</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jstat -gcoldcapacity &lt;pid&gt;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>结果字段</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>OGCMN</td>
<td>old代中初始化(最小)的大小 (字节)</td>
</tr>
<tr>
<td>OGCMX</td>
<td>old代的最大容量(字节)</td>
</tr>
<tr>
<td>OGC</td>
<td>old代当前新生成的容量 (字节)</td>
</tr>
<tr>
<td>OC</td>
<td>Old代的容量 (字节)</td>
</tr>
<tr>
<td>YGC</td>
<td>从应用程序启动到采样时年轻代中gc次数</td>
</tr>
<tr>
<td>FGC</td>
<td>从应用程序启动到采样时old代(全gc)gc次数</td>
</tr>
<tr>
<td>FGCT</td>
<td>从应用程序启动到采样时old代(全gc)gc所用时间(s)</td>
</tr>
<tr>
<td>GCT</td>
<td>从应用程序启动到采样时gc用的总时间(s)</td>
</tr>
</tbody></table>
</li>
<li><p>-gcutil 统计gc信息</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jstat -gcutil &lt;pid&gt;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>结果字段</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>S0</td>
<td>年轻代中第一个survivor（幸存区）已使用的占当前容量百分比</td>
</tr>
<tr>
<td>S1</td>
<td>年轻代中第二个survivor（幸存区）已使用的占当前容量百分比</td>
</tr>
<tr>
<td>E</td>
<td>年轻代中Eden（伊甸园）已使用的占当前容量百分比</td>
</tr>
<tr>
<td>O</td>
<td>old代已使用的占当前容量百分比</td>
</tr>
<tr>
<td>M</td>
<td>元数据的空间使用率</td>
</tr>
<tr>
<td>P</td>
<td>perm代已使用的占当前容量百分比</td>
</tr>
<tr>
<td>YGC</td>
<td>从应用程序启动到采样时年轻代中gc次数</td>
</tr>
<tr>
<td>YGCT</td>
<td>从应用程序启动到采样时年轻代中gc所用时间(s)</td>
</tr>
<tr>
<td>FGC</td>
<td>从应用程序启动到采样时old代(全gc)gc次数</td>
</tr>
<tr>
<td>FGCT</td>
<td>从应用程序启动到采样时old代(全gc)gc所用时间(s)</td>
</tr>
<tr>
<td>GCT</td>
<td>从应用程序启动到采样时gc用的总时间(s)</td>
</tr>
</tbody></table>
</li>
<li><p>-gccause 显示垃圾回收的相关信息（通-gcutil）,同时显示最后一次或当前正在发生的垃圾回收的诱因。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jstat -gccause &lt;pid&gt;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>结果字段</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>LGCC</td>
<td>最后一次GC原因</td>
</tr>
<tr>
<td>GCC</td>
<td>当前GC原因（No GC 为当前没有执行GC）</td>
</tr>
<tr>
<td>### 2.4 JVM的内存结构</td>
<td></td>
</tr>
</tbody></table>
</li>
</ul>
</li>
</ul>
<img src="https://youdaoyun-chc.oss-cn-shenzhen.aliyuncs.com/java%2F4.png" width="500" hegiht="313" align="center">

<h3 id="2-5-jmap-MAT实战内存溢出"><a href="#2-5-jmap-MAT实战内存溢出" class="headerlink" title="2.5 jmap+MAT实战内存溢出"></a>2.5 jmap+MAT实战内存溢出</h3><ul>
<li><p>导出内存映像文件</p>
<ol>
<li><p>内存溢出自动导出</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-XX:+HeapDumpOnOutOfMemoryError</span><br><span class="line">-XX:HeapDumpPath=./</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用jmap命令手动导出</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jmap -dump:format=b,file=heap.hprof 1292</span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
<li><p>MAT分析内存溢出</p>
<ol>
<li><p>下载地址</p>
<p> <a href="http://www.eclipse.org/mat/downloads.php" target="_blank" rel="noopener">http://www.eclipse.org/mat/downloads.php</a></p>
<p> 启动文件是<code>MemoryAnalyzer.exe</code></p>
<p> 打开hprof文件</p>
 <img src="https://youdaoyun-chc.oss-cn-shenzhen.aliyuncs.com/java%2F5.png" width="500" hegiht="313" align="center">

 <img src="https://youdaoyun-chc.oss-cn-shenzhen.aliyuncs.com/java%2F6.png" width="500" hegiht="313" align="center">

<hr>
 <img src="https://youdaoyun-chc.oss-cn-shenzhen.aliyuncs.com/java%2F7.png" width="500" hegiht="313" align="center">

</li>
</ol>
</li>
</ul>
<h3 id="2-5-jstack解决死循环和死锁"><a href="#2-5-jstack解决死循环和死锁" class="headerlink" title="2.5 jstack解决死循环和死锁"></a>2.5 jstack解决死循环和死锁</h3><ol>
<li><p>获取信息</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">jstack 1292 &gt; 1292.txt</span><br><span class="line"># 找出cpu占用高的PID</span><br><span class="line">top -p 1292 -H</span><br><span class="line"># 获取PID的16进制</span><br><span class="line">printf &quot;%x&quot; 8247</span><br><span class="line"># 在1292.txt文件中搜索查到的进制:2037</span><br><span class="line"># 跳到nid=0x2037行</span><br></pre></td></tr></table></figure>
</li>
<li><p>线程状态</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 1292.txt</span><br><span class="line">java.lang.Thread.State: WAITING (parking)</span><br><span class="line"># NEW           新建</span><br><span class="line"># RUNNABLE      运行中</span><br><span class="line"># WAITING       等待</span><br><span class="line"># BLOCKED       阻塞</span><br><span class="line"># TERMINATED    结束</span><br></pre></td></tr></table></figure>
</li>
<li><p>死锁</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 拉到文件末尾</span><br><span class="line"># 有deadlock就是程序定位到死锁了</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h1 id="三-java进程监控"><a href="#三-java进程监控" class="headerlink" title="三. java进程监控"></a>三. java进程监控</h1><h2 id="1-基于JVisualVM的可视化监控"><a href="#1-基于JVisualVM的可视化监控" class="headerlink" title="1. 基于JVisualVM的可视化监控"></a>1. 基于JVisualVM的可视化监控</h2><h3 id="1-本地监控"><a href="#1-本地监控" class="headerlink" title="1. 本地监控"></a>1. 本地监控</h3><pre><code>1. JVisualVM程序在jdk的bin目录下jvisualvm.exe
2. 设置插件可安装</code></pre><img src="https://youdaoyun-chc.oss-cn-shenzhen.aliyuncs.com/java%2F8.png" width="500" hegiht="313" align="center">

<img src="https://youdaoyun-chc.oss-cn-shenzhen.aliyuncs.com/java%2F9.png" width="500" hegiht="313" align="center">

<h3 id="2-安装插件"><a href="#2-安装插件" class="headerlink" title="2. 安装插件"></a>2. 安装插件</h3><ul>
<li><p>在下面地址中找出对应版本的<code>Java VisualVM</code>地址</p>
<p><a href="https://visualvm.github.io/pluginscenters.html" target="_blank" rel="noopener">https://visualvm.github.io/pluginscenters.html</a></p>
</li>
</ul>
<pre><code>* 安装Visual GC和BTrace插件</code></pre><h3 id="3-远程监控"><a href="#3-远程监控" class="headerlink" title="3. 远程监控"></a>3. 远程监控</h3><pre><code>* 远程jar监控
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">java -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.port=40124 -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.authenticate=false -Djava.net.preferIPv4Stack=true -Djava.rmi.server.hostname=39.108.187.59 -jar foo.jar</span><br><span class="line">#-Dcom.sun.management.jmxremote.port:远程监控端口</span><br><span class="line">#-Dcom.sun.management.jmxremote.ssl:指定了JMX是否启用ssl</span><br><span class="line">#-Dcom.sun.management.jmxremote.authenticate:指定了JMX是否启用鉴权（需要用户名，密码鉴权）</span><br><span class="line"># -Djava.rmi.server.hostname:运行程序的主机的ip</span><br></pre></td></tr></table></figure>

* 配置hostname
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 查询</span><br><span class="line">hostname -i</span><br><span class="line"># 加入hostname -i 的ip</span><br><span class="line"># 与127.0.0.1 的一致</span><br><span class="line">vi /etc/hosts</span><br><span class="line"># 关闭防火墙</span><br></pre></td></tr></table></figure></code></pre><h1 id="四-Nginx"><a href="#四-Nginx" class="headerlink" title="四. Nginx"></a>四. Nginx</h1><h2 id="1-基本命令"><a href="#1-基本命令" class="headerlink" title="1. 基本命令"></a>1. 基本命令</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># 使用default.conf配置文件，将它放入`/etc/nginx/conf.d` 中</span><br><span class="line"></span><br><span class="line"># 启动命令</span><br><span class="line">nginx -c /etc/nginx/nginx.conf</span><br><span class="line">重启命令</span><br><span class="line">nginx -s reload</span><br><span class="line"># 查看编译信息</span><br><span class="line">nginx -V</span><br><span class="line"># 注意:配置反向代理要关闭selinux,setenforce 0</span><br></pre></td></tr></table></figure>

<h2 id="2-nginx优化"><a href="#2-nginx优化" class="headerlink" title="2. nginx优化"></a>2. nginx优化</h2><h3 id="1-增加工作线程数和并发数"><a href="#1-增加工作线程数和并发数" class="headerlink" title="1. 增加工作线程数和并发数"></a>1. 增加工作线程数和并发数</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># nginx.conf</span><br><span class="line">worker_processes 4; #cpu核心数</span><br><span class="line">events&#123;</span><br><span class="line">   worker_connections 10240; #每个进程打开的最大连接数,包含了nginx与客户端和nignx与upstream之间的连接 </span><br><span class="line">   multi_accept on; #可以一次建立多个连接</span><br><span class="line">   use epoll;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-配置Server的长连接"><a href="#2-配置Server的长连接" class="headerlink" title="2. 配置Server的长连接"></a>2. 配置Server的长连接</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># default.conf</span><br><span class="line">keepalive 300; #设置长连接数的数量</span><br></pre></td></tr></table></figure>

<h3 id="3-配置数据压缩"><a href="#3-配置数据压缩" class="headerlink" title="3. 配置数据压缩"></a>3. 配置数据压缩</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># nginx.conf</span><br><span class="line">gzip on;</span><br><span class="line">gzip_min_length 1k;</span><br><span class="line">gzip_http_version 1.0;</span><br><span class="line">gzip_disable &quot;MSIE [1-6].(?!.*SV1)&quot;;</span><br><span class="line">gzip_types text/plain application/javascript application/x-javascript text/css application/xml text/javascript application/x-httpd-php image/jpeg image/gif image/png application/vnd.ms-fontobject font/ttf font/opentype font/x-woff image/svg+xml;</span><br><span class="line">gzip_vary on</span><br></pre></td></tr></table></figure>

<h3 id="4-操作系统优化"><a href="#4-操作系统优化" class="headerlink" title="4. 操作系统优化"></a>4. 操作系统优化</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># /etc/sysctl.conf</span><br><span class="line">sysctl -w net.ipv4.tcp_syncookies = 1 # 防止一个套接字在有过多试图连接到达时引起过载</span><br><span class="line">sysctl -w net.core.somaxconn = 1024 #默认128,连接队列</span><br><span class="line">sysctl -w net.ipv4.tcp_fin_timeout = 10 #timewait的超时时间</span><br><span class="line">sysctl -w net.ipv4.tcp_tw_reuse = 1 #os直接使用timewait的连接</span><br><span class="line">sysctl -w net.ipv4.tcp_tw_recycle = 0 #回收禁用</span><br></pre></td></tr></table></figure>

<h2 id="3-nginx配置文件"><a href="#3-nginx配置文件" class="headerlink" title="3. nginx配置文件"></a>3. nginx配置文件</h2><ul>
<li><p>nginx.conf</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">user  root;</span><br><span class="line">worker_processes  1;</span><br><span class="line"></span><br><span class="line">error_log  /var/log/nginx/error.log warn;</span><br><span class="line">pid        /var/run/nginx.pid;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">events &#123;</span><br><span class="line">    worker_connections  1024;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">http &#123;</span><br><span class="line">    include       /etc/nginx/mime.types;</span><br><span class="line">    default_type  application/octet-stream;</span><br><span class="line">	</span><br><span class="line">	client_max_body_size 5m; </span><br><span class="line">	</span><br><span class="line">	underscores_in_headers on; #自定义 Head 必须定义 </span><br><span class="line"></span><br><span class="line">    log_format  main  &apos;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &apos;</span><br><span class="line">                      &apos;$status $body_bytes_sent &quot;$http_referer&quot; &apos;</span><br><span class="line">                      &apos;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&apos;;</span><br><span class="line"></span><br><span class="line">    access_log  /var/log/nginx/access.log  main;</span><br><span class="line"></span><br><span class="line">    sendfile        on;</span><br><span class="line">    #tcp_nopush     on;</span><br><span class="line"></span><br><span class="line">    keepalive_timeout  65;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    gzip on;</span><br><span class="line">    gzip_min_length 1k;</span><br><span class="line">    gzip_http_version 1.0;</span><br><span class="line">    gzip_disable &quot;MSIE [1-6].(?!.*SV1)&quot;;</span><br><span class="line">    gzip_types text/plain application/javascript application/x-javascript text/css application/xml text/javascript application/x-httpd-php image/jpeg image/gif image/png application/vnd.ms-fontobject font/ttf font/opentype font/x-woff image/svg+xml;</span><br><span class="line">	gzip_vary on</span><br><span class="line"></span><br><span class="line">    include /etc/nginx/conf.d/*.conf;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>default.conf</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">upstream teamfortWeChat &#123;  #代理配置</span><br><span class="line">	server 127.0.0.1:8080;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">upstream spring-boot-admin &#123; </span><br><span class="line">	server 127.0.0.1:8012;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">upstream spring-boot-admin-test &#123; #灰度ip发布</span><br><span class="line">	server 127.0.0.1:8011;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#server &#123;			#https配置</span><br><span class="line"> #   listen 443;</span><br><span class="line"> #   server_name 127.0.0.1;</span><br><span class="line"> #   ssl on;</span><br><span class="line"> #   root html;</span><br><span class="line"> #   index index.html index.htm;</span><br><span class="line"> #   ssl_certificate   cert/214245831800280.pem;</span><br><span class="line"> #   ssl_certificate_key  cert/214245831800280.key;</span><br><span class="line"> #   ssl_session_timeout 5m;</span><br><span class="line"> #   ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4;</span><br><span class="line"> #   ssl_protocols TLSv1 TLSv1.1 TLSv1.2;</span><br><span class="line"> #   ssl_prefer_server_ciphers on;</span><br><span class="line">#	</span><br><span class="line">#	location / &#123;</span><br><span class="line">#		 root   html;</span><br><span class="line">#         index  index.html index.htm;</span><br><span class="line">#    	&#125;</span><br><span class="line">#	location /teamfortWeChat/ &#123;</span><br><span class="line">#	proxy_pass   http://teamfortWeChat;</span><br><span class="line">#	proxy_redirect off;</span><br><span class="line">#	proxy_set_header Host $host;</span><br><span class="line">#	proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">#	proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">#	proxy_connect_timeout 90;</span><br><span class="line">#	proxy_send_timeout 90;</span><br><span class="line">#	proxy_read_timeout 90;</span><br><span class="line">#	&#125;</span><br><span class="line">#		</span><br><span class="line">#&#125;</span><br><span class="line"></span><br><span class="line">server &#123;		#http配置</span><br><span class="line">    listen       80;</span><br><span class="line">    server_name  127.0.0.1;</span><br><span class="line"></span><br><span class="line">    #charset koi8-r;</span><br><span class="line">    #access_log  /var/log/nginx/log/host.access.log  main;</span><br><span class="line">	</span><br><span class="line">		</span><br><span class="line">	location /spring-boot-admin/ &#123;</span><br><span class="line">		if ($remote_addr ~* &quot;116.20.64.169&quot;) &#123;	#ip不同进入服务不同一般用于灰度发布</span><br><span class="line">			proxy_pass http://spring-boot-admin;</span><br><span class="line">		&#125;</span><br><span class="line">		proxy_pass http://spring-boot-admin-test;</span><br><span class="line">		proxy_redirect off;</span><br><span class="line">		proxy_set_header Host $host;</span><br><span class="line">		proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">		proxy_connect_timeout 90;</span><br><span class="line">		proxy_send_timeout 90;</span><br><span class="line">		proxy_read_timeout 90;</span><br><span class="line">    	&#125;</span><br><span class="line">		</span><br><span class="line">	</span><br><span class="line">	location / &#123;</span><br><span class="line">		   root   html;</span><br><span class="line">         index  index.html index.htm;</span><br><span class="line">    	&#125;</span><br><span class="line">    	</span><br><span class="line">    #加载其他配置文件</span><br><span class="line">	include /etc/nginx/conf.d/server80/*.conf;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	#设置例外静态资源，由nginx来处理静态资源#</span><br><span class="line">    location ~ \.(html|js|css|png|gif|jpg|jpeg|json|exml|fnt|ttf|TTF|woff|ico)$ &#123;  </span><br><span class="line">		if ($request_uri ~* /spring-boot-admin/(.*)) &#123;	#不需要nginx处理静态资源的项目</span><br><span class="line">			proxy_pass http://spring-boot-admin;</span><br><span class="line">		&#125;</span><br><span class="line">       root /usr/share/nginx/html; </span><br><span class="line">    &#125;</span><br><span class="line">	</span><br><span class="line">	location /MP_verify_3YLUBmJdjqIG7yUh.txt &#123;  #微信公众号验证文件配置/usr/share/nginx/html</span><br><span class="line">        root /usr/share/nginx/html; </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">	location /.well-known/pki-validation/fileauth.txt &#123;  </span><br><span class="line">        root /usr/share/nginx/html; </span><br><span class="line">    &#125;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">    #location / &#123;</span><br><span class="line">    #    root   /usr/share/nginx/html;</span><br><span class="line">    #    index  index.html index.htm;</span><br><span class="line">    #&#125;</span><br><span class="line"></span><br><span class="line">    #error_page  404              /404.html;</span><br><span class="line"></span><br><span class="line">    # redirect server error pages to the static page /50x.html</span><br><span class="line">    #</span><br><span class="line">    error_page   500 502 503 504  /50x.html;</span><br><span class="line">    location = /50x.html &#123;</span><br><span class="line">        root   /usr/share/nginx/html;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    # proxy the PHP scripts to Apache listening on 127.0.0.1:80</span><br><span class="line">    #</span><br><span class="line">    #location ~ \.php$ &#123;</span><br><span class="line">    #    proxy_pass   http://127.0.0.1;</span><br><span class="line">    #&#125;</span><br><span class="line"></span><br><span class="line">    # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000</span><br><span class="line">    #</span><br><span class="line">    #location ~ \.php$ &#123;</span><br><span class="line">    #    root           html;</span><br><span class="line">    #    fastcgi_pass   127.0.0.1:9000;</span><br><span class="line">    #    fastcgi_index  index.php;</span><br><span class="line">    #    fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;</span><br><span class="line">    #    include        fastcgi_params;</span><br><span class="line">    #&#125;</span><br><span class="line"></span><br><span class="line">    # deny access to .htaccess files, if Apache&apos;s document root</span><br><span class="line">    # concurs with nginx&apos;s one</span><br><span class="line">    #</span><br><span class="line">    #location ~ /\.ht &#123;</span><br><span class="line">    #    deny  all;</span><br><span class="line">    #&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h1 id="五-JVM的GC调优"><a href="#五-JVM的GC调优" class="headerlink" title="五. JVM的GC调优"></a>五. JVM的GC调优</h1><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 启动时加入以下命令用于记录内存溢出时的记录</span></span><br><span class="line">-XX:+DisableExplicitGC  <span class="comment"># 使用nio或者Netty的框架不能使用</span></span><br><span class="line">-XX:+HeapDumpOnOutOfMemoryError</span><br><span class="line">-XX:HeapDumpPath=./logs/</span><br><span class="line"></span><br><span class="line"><span class="comment"># 以下的是打印日常gc日志</span></span><br><span class="line">-XX:+PrintGCDetails <span class="comment"># 打印gc详情</span></span><br><span class="line">-XX:+PrintGCDateStamps <span class="comment"># 打印gc时间戳</span></span><br><span class="line">-XX:+PrintGCTimeStamps</span><br><span class="line">-Xloggc:gcc.log <span class="comment"># 将日志输出到文件</span></span><br></pre></td></tr></table></figure>

<h2 id="5-1-GC日志"><a href="#5-1-GC日志" class="headerlink" title="5.1 GC日志"></a>5.1 GC日志</h2><ol>
<li><p>内容详情分析</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">0.756: [Full GC (System) 0.756: [CMS: 0K-&gt;1696K(204800K), 0.0347096 secs] 11488K-&gt;1696K(252608K), [CMS Perm : 10328K-&gt;10320K(131072K)], 0.0347949 secs] [Times: user=0.06 sys=0.00, real=0.05 secs]</span><br><span class="line"> </span><br><span class="line">1.728: [GC 1.728: [ParNew: 38272K-&gt;2323K(47808K), 0.0092276 secs] 39968K-&gt;4019K(252608K), 0.0093169 secs] [Times: user=0.01 sys=0.00, real=0.00 secs]</span><br><span class="line"> </span><br><span class="line">2.642: [GC 2.643: [ParNew: 40595K-&gt;3685K(47808K), 0.0075343 secs] 42291K-&gt;5381K(252608K), 0.0075972 secs] [Times: user=0.03 sys=0.00, real=0.02 secs]</span><br><span class="line"> </span><br><span class="line">4.349: [GC 4.349: [ParNew: 41957K-&gt;5024K(47808K), 0.0106558 secs] 43653K-&gt;6720K(252608K), 0.0107390 secs] [Times: user=0.03 sys=0.00, real=0.02 secs]</span><br><span class="line"> </span><br><span class="line">5.617: [GC 5.617: [ParNew: 43296K-&gt;7006K(47808K), 0.0136826 secs] 44992K-&gt;8702K(252608K), 0.0137904 secs] [Times: user=0.03 sys=0.00, real=0.02 secs]</span><br><span class="line"> </span><br><span class="line">7.429: [GC 7.429: [ParNew: 45278K-&gt;6723K(47808K), 0.0251993 secs] 46974K-&gt;10551K(252608K), 0.0252421 secs]</span><br></pre></td></tr></table></figure>

<p> 取倒数第二条记录分析一下各个字段都代表了什么含义</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">5.617（时间戳）: [GC（Young GC） 5.617（时间戳）: [ParNew（GC的区域）: 43296K（垃圾回收前的大小）-&gt;7006K（垃圾回收以后的大小）(47808K)（该区域总大小）, 0.0136826 secs（回收时间）] 44992K（堆区垃圾被回收前的大小）-&gt;8702K（堆区垃圾被回收后的大小）(252608K)（堆区总大小）, 0.0137904 secs（回收时间）] [Times: user=0.03（GC用户耗时） sys=0.00（GC系统耗时）, real=0.02 secs（GC实际耗时）]</span><br></pre></td></tr></table></figure>


</li>
</ol>
<pre><code>从最后一条GC记录中我们可以看到 Young GC回收了 45278-6723=38555K的内存

Heap区通过这次回收总共减少了 46974-10551=36423K的内存。

38555-36423=2132K说明通过该次Young GC有2132K的内存被移动到了Old Gen

我们来验证一下

在最后一次Young GC的回收以前 Old Gen的大小为8702-7006=1696

回收以后Old Gen的内存使用为10551-6723=3828

Old Gen在该次Young GC以后内存增加了3828-1696=2132K 与预计的相符</code></pre><ol start="2">
<li>内容总结分析<br> <img src="https://youdaoyun-chc.oss-cn-shenzhen.aliyuncs.com/java/GC%E6%97%A5%E5%BF%97.png" alt="image"><ul>
<li>[GC [DefNew … …]</li>
<li>GC日志开头的信息通过设置-verbose:gc参数后才能输出。</li>
<li>“[GC”和”[Full GC”说明这次垃圾收集的停顿类型，如果这次GC发生了Stop-The-World，则为”[Full GC”，否则为”[GC”</li>
<li>“[DefNew “表示GC发生的区域为Serial收集器的新生代中，DefNew是”Default New Generation”的缩写。Serial收集器的老年代和永久代分别表示为”Tenured”、”Perm”</li>
<li>** eden space 8192K, 52% used**</li>
<li>新生代的Eden区总共大小为8MB，使用掉的4MB是用来存放allocation4对象</li>
<li>tenured generation total 10240K, used 6144K</li>
<li>老年代大小为10MB，使用掉的6MB是用来存放allocation1、allocation2和allocation3这3个对象</li>
</ul>
</li>
</ol>
<h1 id="6-工具"><a href="#6-工具" class="headerlink" title="6 工具"></a>6 工具</h1><ul>
<li><p>在线GC日志分析</p>
<p> <a href="http://gceasy.io/" target="_blank" rel="noopener">http://gceasy.io/</a></p>
</li>
<li><p>JVM在线调优</p>
<p><a href="http://xxfox.perfma.com/" target="_blank" rel="noopener">http://xxfox.perfma.com/</a> </p>
</li>
<li><p>visualGC 日志工具</p>
</li>
</ul>
<h1 id="7-JVM知识的优秀文章"><a href="#7-JVM知识的优秀文章" class="headerlink" title="7 JVM知识的优秀文章"></a>7 JVM知识的优秀文章</h1><p>【JVM调优总结-有着详细的jvm知识介绍】: <a href="https://www.jianshu.com/p/51d82de75d3d" target="_blank" rel="noopener">https://www.jianshu.com/p/51d82de75d3d</a></p>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">Chc</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://blog.caihc.site/posts/31cced81/">https://blog.caihc.site/posts/31cced81/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://blog.caihc.site">Chc</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/调优/">调优    </a></div><div class="post_share"></div></div><nav class="pagination_post" id="pagination"><div class="prev-post pull-left"><a href="/posts/5e103278/"><img class="prev_cover lozad" data-src="http://qiniu.caihc.site/blog/sj.jpeg" onerror="onerror=null;src='/img/404.jpg'"><div class="label">上一篇</div><div class="prev_info"><span>java的23种设计模式</span></div></a></div><div class="next-post pull-right"><a href="/posts/3fe19f6b/"><img class="next_cover lozad" data-src="http://qiniu.caihc.site/blog/2.png" onerror="onerror=null;src='/img/404.jpg'"><div class="label">下一篇</div><div class="next_info"><span>docker命令选项</span></div></a></div></nav><div class="relatedPosts"></div></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2018 - 2019 By Chc</div><div class="framework-info"><span>驱动 </span><a href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly"><span>Butterfly</span></a></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><section class="rightside" id="rightside"><i class="fa fa-book" id="readmode"> </i><i class="fa fa-plus" id="font_plus"></i><i class="fa fa-minus" id="font_minus"></i><i class="fa fa-comments-o" id="to_comment"> </i><a class="translate_chn_to_cht" id="translateLink"></a><i class="fa fa-moon-o nightshift" id="nightshift"></i></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/baidupush.js"></script><script async src="/js/search/local-search.js"></script><script src="/js/tw_cn.js"></script><script>$(document).ready(function() { 
  initializeChineseConversion();
});
function simplifyTextInPage(simplified) {
  if (simplified) {
    $(document.body).t2s();
    $('#translateLink').addClass('simplified');
    $('#translateLink').text('繁');
  } else {
    $(document.body).s2t();
    $('#translateLink').removeClass('simplified');
    $('#translateLink').text('簡');
  }
}
function initializeChineseConversion() {
  var simplified = +Cookies.get('simplified');
  // ?lang=zh-Hans, ?lang=zh-Hant
  var scriptCode = /[?&;]lang=[^&;]*(Han[st])/i.exec(window.location.search);
  if (scriptCode) {
    simplified = +(scriptCode[1].match(/Hans/i) != null);
    Cookies.set('simplified', simplified, {expires: 7, path: '/'});
  }
  simplifyTextInPage(simplified);
  $('#translateLink').click(function() {
    simplified = +!simplified;
    Cookies.set('simplified', simplified, {expires: 7, path: '/'});
    simplifyTextInPage(simplified);
    $(this).blur();
  });
}
</script><script src="/js/nightshift.js"></script><script id="ribbon" src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/js/piao.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@1.2.2/instantpage.min.js" type="module"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章"></div></div></div><hr><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>由</span> <a href="https://github.com/wzpan/hexo-generator-search" style="color:#49B1F5;">hexo-generator-search</a>
 <span>提供支持</span></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div></body></html>